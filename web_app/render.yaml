services:
  # Frontend React App - Web Service
  - type: web
    name: email-phishing-frontend
    env: node
    buildCommand: "npm install && chmod -R 755 node_modules/.bin/ && CI=false npx react-scripts build"
    startCommand: "npx serve -s build -p $PORT"
    rootDir: web_app
    plan: free
    envVars:
      - key: NODE_ENV
        value: production
      - key: CI
        value: "false"
      - key: REACT_APP_API_URL
        value: https://email-threat-detection.onrender.com
    
  # Alternative: Static Site (recommended for better performance)
  # - type: static_site
  #   name: email-phishing-frontend
  #   buildCommand: "cd web_app && npm install && chmod -R 755 node_modules/.bin/ && CI=false npx react-scripts build"
  #   publishPath: web_app/build
  #   envVars:
  #     - key: CI
  #       value: "false"
  #     - key: REACT_APP_API_URL  
  #       value: https://email-threat-detection.onrender.com